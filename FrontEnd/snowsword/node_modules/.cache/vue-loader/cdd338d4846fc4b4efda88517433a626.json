{"remainingRequest":"/Users/cigar/Downloads/SnowSword-main/FrontEnd/snowsword/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cigar/Downloads/SnowSword-main/FrontEnd/snowsword/src/views/filemanager/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/cigar/Downloads/SnowSword-main/FrontEnd/snowsword/src/views/filemanager/index.vue","mtime":1671438929000},{"path":"/Users/cigar/Downloads/SnowSword-main/FrontEnd/snowsword/node_modules/cache-loader/dist/cjs.js","mtime":1715570484549},{"path":"/Users/cigar/Downloads/SnowSword-main/FrontEnd/snowsword/node_modules/babel-loader/lib/index.js","mtime":1715570465906},{"path":"/Users/cigar/Downloads/SnowSword-main/FrontEnd/snowsword/node_modules/cache-loader/dist/cjs.js","mtime":1715570484549},{"path":"/Users/cigar/Downloads/SnowSword-main/FrontEnd/snowsword/node_modules/vue-loader/lib/index.js","mtime":1715570461633}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCByZXF1ZXN0IGZyb20gJ0AvdXRpbHMvcmVxdWVzdCcKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZWxfdHJlZV9wcm9wczp7CiAgICAgICAgbGFiZWw6ICduYW1lJywKICAgICAgICBpc0xlYWY6ICdpc19sZWFmJwogICAgICB9LAoKICAgICAgd2Vic2hlbGxzOiBbCiAgICAgIF0sCgogICAgICBjb250ZW50OnsKICAgICAgICBjdXJyZW50VGFiTmFtZTogIjEiLAogICAgICAgIHRhYkluZGV4OiAxLAoKICAgICAgICB0YWJzOlsKICAgICAgICBdLAogICAgICB9LAoKICAgICAgc2VsZWN0V2Vic2hlbGxGb3JtOnsKICAgICAgICB2aXNpYmxlOiBmYWxzZSwKICAgICAgICB3ZWJzaGVsbElkOiBudWxsLAogICAgICB9CgogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgbG9hZE5vZGUobm9kZSwgcmVzb2x2ZSwgaXRlbSl7CiAgICAgIGxldCBwYXRoOwogICAgICBpZiAobm9kZS5sZXZlbCA9PT0gMCkgewogICAgICAgIHBhdGggPSAiIjsKICAgICAgfWVsc2V7CiAgICAgICAgcGF0aCA9IG5vZGUuZGF0YS5yZWFscGF0aDsKICAgICAgfQoKICAgICAgcmVxdWVzdCh7CiAgICAgICAgdXJsOiAnL3dlYnNoZWxsL2xvYWRGaWxlc0J5SWQnLAogICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgIGRhdGE6IHsgCiAgICAgICAgICBpZDppdGVtLndlYnNoZWxsSWQsCiAgICAgICAgICBwYXRoOnBhdGgKICAgICAgICB9IAogICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICByZXNvbHZlKHJlc3BvbnNlLmRhdGEpOwogICAgICAgIG5vZGUubG9hZGVkID0gZmFsc2U7ICAgIC8v5bGV5byA5paH5Lu25aS55ZCO77yM5L6d54S26K6+572ubG9hZGVk5Li6ZmFsc2XvvIzov5nmoLfph43mlrDlsZXlvIDml7bmiY3kvJrlho3mrKHor7fmsYLlkI7nq6/vvIzojrflj5bmnIDmlrDmlbDmja4KICAgICAgICBub2RlLmlzTGVhZiA9IGZhbHNlOyAgICAvL+WxleW8gOepuuaWh+S7tuWkueWQju+8jOS8muWPmOaIkOWPtuWtkOiKgueCue+8jOi/memHjOaJi+WKqOiuvue9ruaIkOmdnuWPtuWtkOiKgueCuQogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgcmVzb2x2ZShbXSk7ICAvL3Jlc29sdmXnqbrmlbDnu4TlkI7vvIzkvJrlj5jmiJDlj7blrZDoioLngrnvvIzkuIvpnaLorr7nva7lm57pnZ7lj7blrZDoioLngrnvvIzlubbkuJTorr7nva7kuLrpnZ7lsZXlvIDmnKrliqDovb3vvIzorqnnlKjmiLflj6/ku6Xph43mlrDngrnlh7vliqDovb0KICAgICAgICBub2RlLmV4cGFuZGVkID0gZmFsc2U7CiAgICAgICAgbm9kZS5sb2FkZWQgPSBmYWxzZTsKICAgICAgICBub2RlLmlzTGVhZiA9IGZhbHNlOwogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfSkKICAgIH0sCgogICAgbm9kZUNsaWNrKG5vZGUsaXRlbSxpbmRleCl7CiAgICAgIHJlcXVlc3QoewogICAgICAgIHVybDogJy93ZWJzaGVsbC9wcmV2aWV3RmlsZUJ5SWQnLAogICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgIGRhdGE6IHsgCiAgICAgICAgICBpZDppdGVtLndlYnNoZWxsSWQsCiAgICAgICAgICBwYXRoOm5vZGUuZGF0YS5yZWFscGF0aCwKICAgICAgICAgIHR4dExpbWl0Ok51bWJlcihpdGVtLnR4dExpbWl0KSwKICAgICAgICAgIGltZ0xpbWl0Ok51bWJlcihpdGVtLmltZ0xpbWl0KQogICAgICAgIH0gCiAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGl0ZW0uZmlsZURhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfSkKICAgIH0sCgogICAgaGFuZGxlVGFic0VkaXQodGFyZ2V0TmFtZSwgYWN0aW9uKSB7CiAgICAgIGlmIChhY3Rpb24gPT09ICdhZGQnKSB7CiAgICAgICAgdGhpcy5zZWxlY3RXZWJzaGVsbChmYWxzZSk7CiAgICAgIH0KICAgICAgaWYgKGFjdGlvbiA9PT0gJ3JlbW92ZScpIHsKICAgICAgICBsZXQgdGFicyA9IHRoaXMuY29udGVudC50YWJzOwogICAgICAgIGxldCBhY3RpdmVOYW1lID0gdGhpcy5jb250ZW50LmN1cnJlbnRUYWJOYW1lOwogICAgICAgIGlmIChhY3RpdmVOYW1lID09PSB0YXJnZXROYW1lKSB7CiAgICAgICAgICB0YWJzLmZvckVhY2goKHRhYiwgaW5kZXgpID0+IHsKICAgICAgICAgICAgaWYgKHRhYi5uYW1lID09PSB0YXJnZXROYW1lKSB7CiAgICAgICAgICAgICAgbGV0IG5leHRUYWIgPSB0YWJzW2luZGV4ICsgMV0gfHwgdGFic1tpbmRleCAtIDFdOwogICAgICAgICAgICAgIGlmIChuZXh0VGFiKSB7CiAgICAgICAgICAgICAgICBhY3RpdmVOYW1lID0gbmV4dFRhYi5uYW1lOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHRoaXMuY29udGVudC5jdXJyZW50VGFiTmFtZSA9IGFjdGl2ZU5hbWU7CiAgICAgICAgdGhpcy5jb250ZW50LnRhYnMgPSB0YWJzLmZpbHRlcih0YWIgPT4gdGFiLm5hbWUgIT09IHRhcmdldE5hbWUpOwogICAgICB9CiAgICB9LAoKICAgIGZldGNoV2Vic2hlbGxEYXRhKCl7CiAgICAgIHJlcXVlc3QoewogICAgICAgIHVybDogJy93ZWJzaGVsbC9maW5kQWxsJywKICAgICAgICBtZXRob2Q6ICdnZXQnLAogICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLndlYnNoZWxscyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0pCiAgICB9LAoKICAgIHNlbGVjdFdlYnNoZWxsKGlzQWRkVGFiKXsKICAgICAgaWYoaXNBZGRUYWIpewogICAgICAgIHRoaXMuc2VsZWN0V2Vic2hlbGxGb3JtLnZpc2libGUgPSBmYWxzZTsKICAgICAgICBsZXQgbmV3VGFiTmFtZSA9ICsrdGhpcy5jb250ZW50LnRhYkluZGV4ICsgJyc7CiAgICAgICAgbGV0IHdlYnNoZWxsSWQgPSB0aGlzLnNlbGVjdFdlYnNoZWxsRm9ybS53ZWJzaGVsbElkOwoKICAgICAgICBsZXQgaW5kZXggPSB0aGlzLmNvbnRlbnQudGFicy5wdXNoKHsKICAgICAgICAgIHRpdGxlOiAi5Yqg6L295LitLi4uIiwKICAgICAgICAgIG5hbWU6IG5ld1RhYk5hbWUsCiAgICAgICAgICB3ZWJzaGVsbElkOndlYnNoZWxsSWQsCiAgICAgICAgICBmaWxlRGF0YToiIiwKICAgICAgICAgIHR4dExpbWl0OjEwMCwKICAgICAgICAgIGltZ0xpbWl0OjEwMjQKICAgICAgICB9KS0xOwogICAgICAgIHRoaXMuY29udGVudC5jdXJyZW50VGFiTmFtZSA9IG5ld1RhYk5hbWU7CgogICAgICAgIHJlcXVlc3QoewogICAgICAgICAgdXJsOiAnL3dlYnNoZWxsL2dldEFuZFVwZGF0ZUluZm9CeUlkJywKICAgICAgICAgIG1ldGhvZDogJ2dldCcsCiAgICAgICAgICBwYXJhbXM6IHsgaWQ6d2Vic2hlbGxJZCB9IAogICAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgdmFyIHVybCA9IHJlc3BvbnNlLmRhdGEudXJsOwogICAgICAgICAgdmFyIHJlcyA9IHVybC5tYXRjaCgvaHR0cHM/OlwvXC8oLiopP1wvLyk7CiAgICAgICAgICBpZihyZXMpewogICAgICAgICAgICB0aGlzLmNvbnRlbnQudGFic1tpbmRleF0udGl0bGUgPSByZXNbMV07CiAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgdGhpcy5jb250ZW50LnRhYnNbaW5kZXhdLnRpdGxlID0gdXJsOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKTsKICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICB0aGlzLmNvbnRlbnQudGFic1tpbmRleF0udGl0bGUgPSAi5Yqg6L295aSx6LSlIjsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB9KQoKCgogICAgICB9ZWxzZXsKICAgICAgICB0aGlzLnNlbGVjdFdlYnNoZWxsRm9ybS52aXNpYmxlID0gdHJ1ZTsKICAgICAgfQogICAgfSwKCgogIH0sCgogIGNyZWF0ZWQoKXsKICAgIHRoaXMuZmV0Y2hXZWJzaGVsbERhdGEoKTsKICAgIHRoaXMubmFtZSA9IHRoaXMuJHJvdXRlLm5hbWU7CiAgICBpZih0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpewogICAgICB0aGlzLnNlbGVjdFdlYnNoZWxsRm9ybS53ZWJzaGVsbElkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkCiAgICAgIHRoaXMuc2VsZWN0V2Vic2hlbGwodHJ1ZSk7CiAgICB9CiAgfSwKCiAgd2F0Y2g6IHsKICAgICRyb3V0ZSh0bywgZnJvbSkgewogICAgICBpZih0by5uYW1lID09IHRoaXMubmFtZSl7CiAgICAgICAgdGhpcy5mZXRjaFdlYnNoZWxsRGF0YSgpOwogICAgICAgIGlmKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCl7CiAgICAgICAgICB0aGlzLnNlbGVjdFdlYnNoZWxsRm9ybS53ZWJzaGVsbElkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkCiAgICAgICAgICB0aGlzLnNlbGVjdFdlYnNoZWxsKHRydWUpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCgogIG1vdW50ZWQoKXsKICAgIHdpbmRvdy52dWUgPSB0aGlzOwogIH0sCgp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8KA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA","file":"index.vue","sourceRoot":"src/views/filemanager","sourcesContent":["<template>\n  <el-container>\n    <el-main>\n      <el-tabs v-model=\"content.currentTabName\" type=\"card\" editable @edit=\"handleTabsEdit\">\n        <el-tab-pane\n          :key=\"item.name\"\n          v-for=\"item, index in content.tabs\"\n          :label=\"item.title\"\n          :name=\"item.name\"\n        >\n\n              <el-container>\n\n                <el-aside style=\"border:1px solid #e5e7ec;padding-top: 0px;max-height: 800px;\" width=\"30%\">\n                    <el-tree\n                    lazy\n                    :props=\"el_tree_props\"\n                    :load=\"(node, resolve) => loadNode(node, resolve, item)\"\n                    @node-click=\"(object,node,component) => nodeClick(node,item,index)\">\n                    </el-tree>\n                </el-aside>\n\n                <el-main style=\"padding-top: 0px;margin-left:10px;\">\n\n                  <el-descriptions title=\"属性\" :column=\"1\" border>\n                    <el-descriptions-item label=\"真实路径\">{{item.fileData.realpath}}</el-descriptions-item>\n                    <el-descriptions-item label=\"文件大小\">{{item.fileData.size}}</el-descriptions-item>\n                    <el-descriptions-item label=\"权限信息\">{{item.fileData.perms}}</el-descriptions-item>\n                    <el-descriptions-item label=\"inode修改时间\">{{item.fileData.inode_change_time}}</el-descriptions-item>\n                    <el-descriptions-item label=\"文件修改时间\">{{item.fileData.modification_time}}</el-descriptions-item>\n                  </el-descriptions>\n\n                  <br>\n\n                  <el-descriptions title=\"预览\" :colon=\"false\">\n                    <template slot=\"extra\">\n                      <el-form :inline=\"true\">\n                        <el-form-item label=\"文本限制(KB)\">\n                          <el-select \n                            size=\"mini\" \n                            v-model=\"item.txtLimit\" \n                            placeholder=\"大小\" \n                            style=\"width:100px\"\n                            filterable\n                            allow-create>\n                            <el-option value=\"100\"></el-option>\n                            <el-option value=\"512\"></el-option>\n                          </el-select>\n                        </el-form-item>\n\n                        <el-form-item label=\"图片限制(KB)\">\n                          <el-select \n                            size=\"mini\" \n                            v-model=\"item.imgLimit\" \n                            placeholder=\"大小\" \n                            style=\"width:100px\"\n                            filterable\n                            allow-create>\n                            <el-option value=\"1024\"></el-option>\n                            <el-option value=\"5120\"></el-option>\n                          </el-select>\n                        </el-form-item>\n                      </el-form>\n                    </template>\n\n                    <el-descriptions-item>\n                      <el-empty v-if=\"!(item.fileData.is_txt || item.fileData.is_dir || item.fileData.is_img)\" description=\"无法预览\"></el-empty>\n\n                      <el-input\n                        v-if=\"item.fileData.is_txt\" \n                        type=\"textarea\"\n                        :rows=\"20\"\n                        :readonly=\"true\"\n                        v-model=\"item.fileData.preview\">\n                      </el-input>\n\n                      <el-image\n                        v-if=\"item.fileData.is_img\" \n                        :src=\"item.fileData.preview\">\n                      </el-image>\n\n                      <el-table\n                        v-if=\"item.fileData.is_dir\" \n                        :data=\"item.fileData.preview\"\n                        style=\"width: 100%\">\n                        <el-table-column\n                          label=\"名称\">\n                          <template slot-scope=\"scope\">\n                            <i v-if=\"scope.row.is_dir\" class=\"el-icon-folder\"></i>\n                            <i v-if=\"!scope.row.is_dir\" class=\"el-icon-document\"></i>\n                            <span style=\"margin-left: 10px\">{{ scope.row.name }}</span>\n                          </template>\n                        </el-table-column>\n                        <el-table-column\n                          prop=\"size\"\n                          label=\"大小\">\n                        </el-table-column>\n                        <el-table-column\n                          prop=\"perms\"\n                          label=\"权限\">\n                        </el-table-column>\n                        <el-table-column\n                          prop=\"inode_change_time\"\n                          label=\"inode改变时间\">\n                        </el-table-column>\n                        <el-table-column\n                          prop=\"modification_time\"\n                          label=\"最后修改时间\">\n                        </el-table-column>\n                      </el-table>\n\n                    </el-descriptions-item>\n                  </el-descriptions>\n\n                </el-main>\n\n              </el-container>\n\n\n\n        </el-tab-pane>\n      </el-tabs>\n      <el-empty v-if=\"content.tabs.length == 0\" description=\"未选择Webshell\"></el-empty>\n    </el-main>\n\n    <el-dialog title=\"选择数据\" :visible.sync=\"selectWebshellForm.visible\" width=\"40%\">\n      <el-form :model=\"selectWebshellForm\">\n        <el-form-item label=\"URL\" required>\n          <el-select v-model=\"selectWebshellForm.webshellId\" placeholder=\"请选择\" style=\"width:85%\">\n            <el-option\n              v-for=\"item in webshells\"\n              :key=\"item.id\"\n              :label=\"item.url\"\n              :value=\"item.id\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"selectWebshellForm.visible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"selectWebshell(true)\">确 定</el-button>\n      </div>\n    </el-dialog>\n\n  </el-container>\n</template>\n\n<style>\n  .contextmenu {\n    border: 1px solid #ccc;\n    background: #fff;\n    z-index: 3000;\n    position: absolute;\n    list-style-type: none;\n    padding: 5px 0;\n    border-radius: 4px;\n    font-size: 14px;\n    color: #333;\n    box-shadow: 2px 2px 3px 0 rgba(0, 0, 0, 0.2);\n  }\n  .contextmenu li {\n    margin: 0;\n    padding: 5px 10px;\n  }\n  .contextmenu li:hover {\n    background: #f2f2f2;\n    cursor: default;\n  }\n  .el-tree-node.is-expanded > .el-tree-node__children{\n    display: inline-block;\n  }\n</style>\n\n<script>\n  import request from '@/utils/request'\n\n  export default {\n    data() {\n      return {\n        el_tree_props:{\n          label: 'name',\n          isLeaf: 'is_leaf'\n        },\n\n        webshells: [\n        ],\n\n        content:{\n          currentTabName: \"1\",\n          tabIndex: 1,\n\n          tabs:[\n          ],\n        },\n\n        selectWebshellForm:{\n          visible: false,\n          webshellId: null,\n        }\n\n      }\n    },\n    methods: {\n      loadNode(node, resolve, item){\n        let path;\n        if (node.level === 0) {\n          path = \"\";\n        }else{\n          path = node.data.realpath;\n        }\n\n        request({\n          url: '/webshell/loadFilesById',\n          method: 'post',\n          data: { \n            id:item.webshellId,\n            path:path\n          } \n        }).then(response => {\n          resolve(response.data);\n          node.loaded = false;    //展开文件夹后，依然设置loaded为false，这样重新展开时才会再次请求后端，获取最新数据\n          node.isLeaf = false;    //展开空文件夹后，会变成叶子节点，这里手动设置成非叶子节点\n        }).catch(error => {\n          resolve([]);  //resolve空数组后，会变成叶子节点，下面设置回非叶子节点，并且设置为非展开未加载，让用户可以重新点击加载\n          node.expanded = false;\n          node.loaded = false;\n          node.isLeaf = false;\n          console.log(error);\n        })\n      },\n\n      nodeClick(node,item,index){\n        request({\n          url: '/webshell/previewFileById',\n          method: 'post',\n          data: { \n            id:item.webshellId,\n            path:node.data.realpath,\n            txtLimit:Number(item.txtLimit),\n            imgLimit:Number(item.imgLimit)\n          } \n        }).then(response => {\n          item.fileData = response.data;\n        }).catch(error => {\n          console.log(error);\n          console.log(error);\n        })\n      },\n\n      handleTabsEdit(targetName, action) {\n        if (action === 'add') {\n          this.selectWebshell(false);\n        }\n        if (action === 'remove') {\n          let tabs = this.content.tabs;\n          let activeName = this.content.currentTabName;\n          if (activeName === targetName) {\n            tabs.forEach((tab, index) => {\n              if (tab.name === targetName) {\n                let nextTab = tabs[index + 1] || tabs[index - 1];\n                if (nextTab) {\n                  activeName = nextTab.name;\n                }\n              }\n            });\n          }\n          \n          this.content.currentTabName = activeName;\n          this.content.tabs = tabs.filter(tab => tab.name !== targetName);\n        }\n      },\n\n      fetchWebshellData(){\n        request({\n          url: '/webshell/findAll',\n          method: 'get',\n        }).then(response => {\n          this.webshells = response.data;\n        }).catch(error => {\n          console.log(error);\n        })\n      },\n\n      selectWebshell(isAddTab){\n        if(isAddTab){\n          this.selectWebshellForm.visible = false;\n          let newTabName = ++this.content.tabIndex + '';\n          let webshellId = this.selectWebshellForm.webshellId;\n\n          let index = this.content.tabs.push({\n            title: \"加载中...\",\n            name: newTabName,\n            webshellId:webshellId,\n            fileData:\"\",\n            txtLimit:100,\n            imgLimit:1024\n          })-1;\n          this.content.currentTabName = newTabName;\n\n          request({\n            url: '/webshell/getAndUpdateInfoById',\n            method: 'get',\n            params: { id:webshellId } \n          }).then(response => {\n            var url = response.data.url;\n            var res = url.match(/https?:\\/\\/(.*)?\\//);\n            if(res){\n              this.content.tabs[index].title = res[1];\n            }else{\n              this.content.tabs[index].title = url;\n            }\n            this.$forceUpdate();\n          }).catch(error => {\n            this.content.tabs[index].title = \"加载失败\";\n            console.log(error);\n          })\n\n\n\n        }else{\n          this.selectWebshellForm.visible = true;\n        }\n      },\n\n\n    },\n\n    created(){\n      this.fetchWebshellData();\n      this.name = this.$route.name;\n      if(this.$route.params.id){\n        this.selectWebshellForm.webshellId = this.$route.params.id\n        this.selectWebshell(true);\n      }\n    },\n\n    watch: {\n      $route(to, from) {\n        if(to.name == this.name){\n          this.fetchWebshellData();\n          if(this.$route.params.id){\n            this.selectWebshellForm.webshellId = this.$route.params.id\n            this.selectWebshell(true);\n          }\n        }\n      }\n    },\n\n    mounted(){\n      window.vue = this;\n    },\n\n  };\n</script>"]}]}