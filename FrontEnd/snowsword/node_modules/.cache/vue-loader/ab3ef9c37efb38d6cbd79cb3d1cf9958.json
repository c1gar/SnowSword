{"remainingRequest":"/Users/cigar/Downloads/SnowSword-main/FrontEnd/snowsword/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cigar/Downloads/SnowSword-main/FrontEnd/snowsword/src/views/terminal/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/cigar/Downloads/SnowSword-main/FrontEnd/snowsword/src/views/terminal/index.vue","mtime":1671438929000},{"path":"/Users/cigar/Downloads/SnowSword-main/FrontEnd/snowsword/node_modules/cache-loader/dist/cjs.js","mtime":1715570484549},{"path":"/Users/cigar/Downloads/SnowSword-main/FrontEnd/snowsword/node_modules/babel-loader/lib/index.js","mtime":1715570465906},{"path":"/Users/cigar/Downloads/SnowSword-main/FrontEnd/snowsword/node_modules/cache-loader/dist/cjs.js","mtime":1715570484549},{"path":"/Users/cigar/Downloads/SnowSword-main/FrontEnd/snowsword/node_modules/vue-loader/lib/index.js","mtime":1715570461633}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCByZXF1ZXN0IGZyb20gJ0AvdXRpbHMvcmVxdWVzdCcKaW1wb3J0ICJ4dGVybS9jc3MveHRlcm0uY3NzIjsKaW1wb3J0IHsgVGVybWluYWwgfSBmcm9tICJ4dGVybSI7CmltcG9ydCB7IEZpdEFkZG9uIH0gZnJvbSAieHRlcm0tYWRkb24tZml0IjsKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgd2Vic2hlbGxzOiBbCiAgICAgICAgLy8gewogICAgICAgIC8vICAgaWQ6IDEsCiAgICAgICAgLy8gICB1cmw6ICJodHRwOi8vcXEuY29tLzEucGhwIiwKICAgICAgICAvLyB9CiAgICAgIF0sCgogICAgICBjb250ZW50OnsKICAgICAgICBjdXJyZW50VGFiTmFtZTogbnVsbCwKICAgICAgICB0YWJJbmRleDowLAoKICAgICAgICB0YWJzOlsKICAgICAgICAgIC8vIHsKICAgICAgICAgIC8vICAgdGl0bGU6ICdUYWIgMScsCiAgICAgICAgICAvLyAgIG5hbWU6ICcxJywKICAgICAgICAgIC8vIH0KICAgICAgICBdLAogICAgICB9LAoKICAgICAgc2VsZWN0V2Vic2hlbGxGb3JtOnsKICAgICAgICB2aXNpYmxlOiBmYWxzZSwKICAgICAgICB3ZWJzaGVsbElkOiBudWxsCiAgICAgIH0sCgoKCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVUYWJzRWRpdCh0YXJnZXROYW1lLCBhY3Rpb24pIHsKICAgICAgaWYgKGFjdGlvbiA9PT0gJ2FkZCcpIHsKICAgICAgICB0aGlzLnNlbGVjdFdlYnNoZWxsKGZhbHNlKTsKICAgICAgfQogICAgICBpZiAoYWN0aW9uID09PSAncmVtb3ZlJykgewogICAgICAgIGxldCB0YWJzID0gdGhpcy5jb250ZW50LnRhYnM7CiAgICAgICAgbGV0IGFjdGl2ZU5hbWUgPSB0aGlzLmNvbnRlbnQuY3VycmVudFRhYk5hbWU7CiAgICAgICAgaWYgKGFjdGl2ZU5hbWUgPT09IHRhcmdldE5hbWUpIHsKICAgICAgICAgIHRhYnMuZm9yRWFjaCgodGFiLCBpbmRleCkgPT4gewogICAgICAgICAgICBpZiAodGFiLm5hbWUgPT09IHRhcmdldE5hbWUpIHsKICAgICAgICAgICAgICBsZXQgbmV4dFRhYiA9IHRhYnNbaW5kZXggKyAxXSB8fCB0YWJzW2luZGV4IC0gMV07CiAgICAgICAgICAgICAgaWYgKG5leHRUYWIpIHsKICAgICAgICAgICAgICAgIGFjdGl2ZU5hbWUgPSBuZXh0VGFiLm5hbWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgdGhpcy5jb250ZW50LmN1cnJlbnRUYWJOYW1lID0gYWN0aXZlTmFtZTsKICAgICAgICB0aGlzLmNvbnRlbnQudGFicyA9IHRhYnMuZmlsdGVyKHRhYiA9PiB0YWIubmFtZSAhPT0gdGFyZ2V0TmFtZSk7CiAgICAgIH0KICAgIH0sCgogICAgZmV0Y2hXZWJzaGVsbERhdGEoKXsKICAgICAgcmVxdWVzdCh7CiAgICAgICAgdXJsOiAnL3dlYnNoZWxsL2ZpbmRBbGwnLAogICAgICAgIG1ldGhvZDogJ2dldCcsCiAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMud2Vic2hlbGxzID0gcmVzcG9uc2UuZGF0YTsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfSkKICAgIH0sCgogICAgc2VsZWN0V2Vic2hlbGwoaXNBZGRUYWIpewogICAgICBpZihpc0FkZFRhYil7CiAgICAgICAgdGhpcy5zZWxlY3RXZWJzaGVsbEZvcm0udmlzaWJsZSA9IGZhbHNlOwogICAgICAgIGxldCBuZXdUYWJOYW1lID0gKyt0aGlzLmNvbnRlbnQudGFiSW5kZXggKyAnJzsKICAgICAgICB2YXIgaWQgPSB0aGlzLnNlbGVjdFdlYnNoZWxsRm9ybS53ZWJzaGVsbElkOwoKICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmNvbnRlbnQudGFicy5wdXNoKHsKICAgICAgICAgIHRpdGxlOiAi5Yqg6L295LitLi4uIiwKICAgICAgICAgIG5hbWU6IG5ld1RhYk5hbWUsCiAgICAgICAgICBpZDppZAogICAgICAgIH0pLTE7CiAgICAgICAgdGhpcy5jb250ZW50LmN1cnJlbnRUYWJOYW1lID0gbmV3VGFiTmFtZTsKCiAgICAgICAgcmVxdWVzdCh7CiAgICAgICAgICB1cmw6ICcvd2Vic2hlbGwvZ2V0VGVybWluYWxJbmZvQnlJZCcsCiAgICAgICAgICBtZXRob2Q6ICdnZXQnLAogICAgICAgICAgcGFyYW1zOiB7IGlkOmlkIH0gCiAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7CgogICAgICAgICAgLy/orr7nva50YWLmoIfpopgKICAgICAgICAgIHZhciB1cmwgPSByZXNwb25zZS5kYXRhLnVybDsKICAgICAgICAgIHZhciByZXMgPSB1cmwubWF0Y2goL2h0dHBzPzpcL1wvKC4qKT9cLy8pOwogICAgICAgICAgaWYocmVzKXsKICAgICAgICAgICAgdGhpcy5jb250ZW50LnRhYnNbaW5kZXhdLnRpdGxlID0gcmVzWzFdOwogICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIHRoaXMuY29udGVudC50YWJzW2luZGV4XS50aXRsZSA9IHVybDsKICAgICAgICAgIH0KCiAgICAgICAgICAvL+WIneWni+WMllRlcm1pbmFsCiAgICAgICAgICBjb25zdCB0ZXJtID0gbmV3IFRlcm1pbmFsKHsKICAgICAgICAgICAgLy9mb250U2l6ZTogMTQsCiAgICAgICAgICAgIHJlbmRlcmVyVHlwZTogImNhbnZhcyIsIC8v5riy5p+T57G75Z6LCiAgICAgICAgICAgIHJvd3M6IDUwLCAvL+ihjOaVsAogICAgICAgICAgICAvL2NvbHM6IHBhcnNlSW50KF90aGlzLmNvbHMpLCAvLyDkuI3mjIflrprooYzmlbDvvIzoh6rliqjlm57ovablkI7lhYnmoIfku47kuIvkuIDooYzlvIDlp4sKICAgICAgICAgICAgY29udmVydEVvbDogdHJ1ZSwgLy/lkK/nlKjml7bvvIzlhYnmoIflsIborr7nva7kuLrkuIvkuIDooYznmoTlvIDlpLQKICAgICAgICAgICAgLy9zY3JvbGxiYWNrOiA1MCwgLy/nu4jnq6/kuK3nmoTlm57mu5rph48KICAgICAgICAgICAgZGlzYWJsZVN0ZGluOiBmYWxzZSwgLy/mmK/lkKblupTnpoHnlKjovpPlhaXjgIIKICAgICAgICAgICAgY3Vyc29yU3R5bGU6ICJ1bmRlcmxpbmUiLCAvL+WFieagh+agt+W8jwogICAgICAgICAgICBjdXJzb3JCbGluazogdHJ1ZSwgLy/lhYnmoIfpl6rng4EKICAgICAgICAgICAgdGhlbWU6IHsKICAgICAgICAgICAgICBmb3JlZ3JvdW5kOiAiI0JGQ0JEOSIsIC8v5a2X5L2TCiAgICAgICAgICAgICAgYmFja2dyb3VuZDogIiMzMDQxNTYiLCAvL+iDjOaZr+iJsgogICAgICAgICAgICAgIGN1cnNvcjogImhlbHAiLCAvL+iuvue9ruWFieaghwogICAgICAgICAgICAgIC8vbGluZUhlaWdodDogMTYsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9KTsKICAgICAgICAgIGNvbnN0IGZpdEFkZG9uID0gbmV3IEZpdEFkZG9uKCk7CiAgICAgICAgICB0ZXJtLmxvYWRBZGRvbihmaXRBZGRvbik7CgogICAgICAgICAgdGhpcy5jb250ZW50LnRhYnNbaW5kZXhdLnRlcm0gPSB0ZXJtOwogICAgICAgICAgdGhpcy5jb250ZW50LnRhYnNbaW5kZXhdLmZpdEFkZG9uID0gZml0QWRkb247CiAgICAgICAgICB0aGlzLmNvbnRlbnQudGFic1tpbmRleF0ucGF0aCA9IHJlc3BvbnNlLmRhdGEucGF0aDsKICAgICAgICAgIHRoaXMuY29udGVudC50YWJzW2luZGV4XS5ob3N0bmFtZSA9IHJlc3BvbnNlLmRhdGEuaG9zdG5hbWU7CiAgICAgICAgICB0aGlzLmNvbnRlbnQudGFic1tpbmRleF0udXNlciA9IHJlc3BvbnNlLmRhdGEudXNlcjsKICAgICAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCk7CgogICAgICAgICAgdGhpcy5vcGVuVGVybSh0aGlzLiRyZWZzWyJ4dGVybSIrbmV3VGFiTmFtZV1bMF0uJGVsLHRoaXMuY29udGVudC50YWJzW2luZGV4XSk7CiAgICAgICAgICAKICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICB0aGlzLmNvbnRlbnQudGFic1tpbmRleF0udGl0bGUgPSAi5Yqg6L295aSx6LSlIjsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB9KQoKICAgICAgfWVsc2V7CiAgICAgICAgdGhpcy5zZWxlY3RXZWJzaGVsbEZvcm0udmlzaWJsZSA9IHRydWU7CiAgICAgIH0KICAgIH0sCgogICAgb3BlblRlcm0oY29tcG9uZW50LHRhYil7CiAgICAgIHRhYi50ZXJtLm9wZW4oY29tcG9uZW50KTsKICAgICAgdGFiLmZpdEFkZG9uLmZpdCgpOwogICAgICB0YWIudGVybS5mb2N1cygpOwogICAgICB2YXIgcHJvbXB0ID0gdGFiLnVzZXIrIkAiK3RhYi5ob3N0bmFtZSsiOiAiK3RhYi5wYXRoOwogICAgICB0YWIudGVybS53cml0ZWxuKHByb21wdCk7CiAgICAgIHRhYi50ZXJtLndyaXRlKCIkICIpOwogICAgICAKICAgICAgdGFiLmNvbW1hbmQgPSAiIjsgLy/liJ3lp4vljJblkb3ku6QKICAgICAgdGFiLnRlcm1PbkRhdGEgPSBmdW5jdGlvbihkYXRhKXsgIC8v5ZyodGFi5Lit5a6a5LmJdGVybU9uRGF0YeWHveaVsAoKICAgICAgICBzd2l0Y2ggKGRhdGEpIHsKICAgICAgICAgIGNhc2UgU3RyaW5nLmZyb21Db2RlUG9pbnQoMTMpOiAvL+Wbnui9pgogICAgICAgICAgICB0YWIudGVybS53cml0ZShkYXRhICsgIlxuIik7CgogICAgICAgICAgICBpZih0YWIuY29tbWFuZC50cmltKCkgPT0gImNsZWFyIiB8fCB0YWIuY29tbWFuZC50cmltKCkgPT0gImNscyIpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygxKTsKICAgICAgICAgICAgICB0YWIudGVybS5jbGVhcigpOwogICAgICAgICAgICAgIHRhYi50ZXJtLndyaXRlKCJcdTAwMWJbSFx1MDAxYlsySiIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICByZXF1ZXN0KHsKICAgICAgICAgICAgICB1cmw6ICcvd2Vic2hlbGwvZXhlY3V0ZUNvbW1hbmRCeUlkJywKICAgICAgICAgICAgICBtZXRob2Q6ICdwb3N0JywKICAgICAgICAgICAgICBkYXRhOiB7IAogICAgICAgICAgICAgICAgaWQ6IHRhYi5pZCwKICAgICAgICAgICAgICAgIHBhdGg6IHRhYi5wYXRoLAogICAgICAgICAgICAgICAgY29tbWFuZDogdGFiLmNvbW1hbmQKICAgICAgICAgICAgICB9IAogICAgICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICB0YWIudGVybS53cml0ZWxuKHJlc3BvbnNlLmRhdGEucmVzdWx0KTsKICAgICAgICAgICAgICB0YWIucGF0aCA9IHJlc3BvbnNlLmRhdGEucGF0aDsKCiAgICAgICAgICAgICAgdmFyIHByb21wdCA9IHRhYi51c2VyKyJAIit0YWIuaG9zdG5hbWUrIjogIit0YWIucGF0aDsKICAgICAgICAgICAgICB0YWIudGVybS53cml0ZWxuKHByb21wdCk7CiAgICAgICAgICAgICAgdGFiLnRlcm0ud3JpdGUoIiQgIik7CiAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgIH0pCgogICAgICAgICAgICB0YWIuY29tbWFuZCA9ICIiOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgU3RyaW5nLmZyb21Db2RlUG9pbnQoMTI3KTogLy/liKDpmaQKICAgICAgICAgICAgaWYgKHRhYi5jb21tYW5kLmxlbmd0aCA8PSAwKSB7IC8v6L6T5YWl55qEY29tbWFuZOWIoOmZpOWujOWQju+8jOS4jeWGjeWvueWIoOmZpOmUruWBmuWHuuWPjeW6lAogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0YWIuY29tbWFuZC5jaGFyQ29kZUF0KHRhYi5jb21tYW5kLmxlbmd0aCAtIDEpID4gMTI3KSB7IC8v5Yik5pat6KaB5Yig6Zmk55qE5a2X56ym5piv5ZCm5piv5rGJ5a2XCiAgICAgICAgICAgICAgdGFiLnRlcm0ud3JpdGUoIlxiXGIgIFxiXGIiKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0YWIudGVybS53cml0ZSgiXGIgXGIiKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0YWIuY29tbWFuZCA9IHRhYi5jb21tYW5kLnN1YnN0cmluZygwLCB0YWIuY29tbWFuZC5sZW5ndGggLSAxKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIFN0cmluZy5mcm9tQ29kZVBvaW50KDI3KSArICJbQSI6IC8v5LiKCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSBTdHJpbmcuZnJvbUNvZGVQb2ludCgyNykgKyAiW0IiOiAvL+S4iwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgU3RyaW5nLmZyb21Db2RlUG9pbnQoMjcpICsgIltEIjogLy/lt6YKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIFN0cmluZy5mcm9tQ29kZVBvaW50KDI3KSArICJbQyI6IC8v5Y+zCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSBTdHJpbmcuZnJvbUNvZGVQb2ludCg5KTogLy90YWIKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICB0YWIuY29tbWFuZCA9IHRhYi5jb21tYW5kICsgZGF0YTsKICAgICAgICAgICAgdGFiLnRlcm0ud3JpdGUoZGF0YSk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgdGFiLnRlcm0ub25EYXRhKHRhYi50ZXJtT25EYXRhKTsgLy/lnKh0ZXJtaW5hbOi+k+WFpeaVsOaNru+8jOS8muiwg+eUqHRhYuS4reeahHRlcm1PbkRhdGHlh73mlbDlubbkvKDlhaXovpPlhaXnmoTmlbDmja4KICAgIH0sCgogICAgcmVzaXplKCl7CiAgICAgIGZvcih2YXIgaW5kZXggaW4gdGhpcy5jb250ZW50LnRhYnMpewogICAgICAgIGlmICh0aGlzLmNvbnRlbnQudGFic1tpbmRleF0uZml0QWRkb24pewogICAgICAgICAgdGhpcy5jb250ZW50LnRhYnNbaW5kZXhdLmZpdEFkZG9uLmZpdCgpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICB9LAoKICBjcmVhdGVkKCl7CiAgICB0aGlzLmZldGNoV2Vic2hlbGxEYXRhKCk7CiAgICB0aGlzLm5hbWUgPSB0aGlzLiRyb3V0ZS5uYW1lOwogICAgaWYodGhpcy4kcm91dGUucGFyYW1zLmlkKXsKICAgICAgdGhpcy5zZWxlY3RXZWJzaGVsbEZvcm0ud2Vic2hlbGxJZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZAogICAgICB0aGlzLnNlbGVjdFdlYnNoZWxsKHRydWUpOwogICAgfQoKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLnJlc2l6ZSk7CiAgfSwKCiAgd2F0Y2g6IHsKICAgICRyb3V0ZSh0bywgZnJvbSkgewogICAgICBpZih0by5uYW1lID09IHRoaXMubmFtZSl7CiAgICAgICAgdGhpcy5mZXRjaFdlYnNoZWxsRGF0YSgpOwogICAgICAgIGlmKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCl7CiAgICAgICAgICB0aGlzLnNlbGVjdFdlYnNoZWxsRm9ybS53ZWJzaGVsbElkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkCiAgICAgICAgICB0aGlzLnNlbGVjdFdlYnNoZWxsKHRydWUpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCgogIG1vdW50ZWQoKXsKICAgIHdpbmRvdy52dWUgPSB0aGlzOwogIH0sCgp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA","file":"index.vue","sourceRoot":"src/views/terminal","sourcesContent":["<template>\n  <el-container>\n    <el-main>\n      <el-tabs v-model=\"content.currentTabName\" type=\"card\" editable @edit=\"handleTabsEdit\">\n        <el-tab-pane\n          :ref=\"'xterm'+item.name\"\n          v-for=\"item in content.tabs\"\n          :key=\"item.name\"\n          :label=\"item.title\"\n          :name=\"item.name\"\n        >\n\n        </el-tab-pane>\n      </el-tabs>\n      <el-empty v-if=\"content.tabs.length == 0\" description=\"未选择Webshell\"></el-empty>\n    </el-main>\n\n    <el-dialog title=\"选择数据\" :visible.sync=\"selectWebshellForm.visible\" width=\"40%\">\n      <el-form :model=\"selectWebshellForm\">\n        <el-form-item label=\"URL\" required>\n          <el-select v-model=\"selectWebshellForm.webshellId\" placeholder=\"请选择\" style=\"width:85%\">\n            <el-option\n              v-for=\"item in webshells\"\n              :key=\"item.id\"\n              :label=\"item.url\"\n              :value=\"item.id\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"selectWebshellForm.visible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"selectWebshell(true)\">确 定</el-button>\n      </div>\n    </el-dialog>\n\n  </el-container>\n</template>\n\n<script>\n  import request from '@/utils/request'\n  import \"xterm/css/xterm.css\";\n  import { Terminal } from \"xterm\";\n  import { FitAddon } from \"xterm-addon-fit\";\n\n  export default {\n    data() {\n      return {\n        webshells: [\n          // {\n          //   id: 1,\n          //   url: \"http://qq.com/1.php\",\n          // }\n        ],\n\n        content:{\n          currentTabName: null,\n          tabIndex:0,\n\n          tabs:[\n            // {\n            //   title: 'Tab 1',\n            //   name: '1',\n            // }\n          ],\n        },\n\n        selectWebshellForm:{\n          visible: false,\n          webshellId: null\n        },\n\n\n\n      }\n    },\n    methods: {\n      handleTabsEdit(targetName, action) {\n        if (action === 'add') {\n          this.selectWebshell(false);\n        }\n        if (action === 'remove') {\n          let tabs = this.content.tabs;\n          let activeName = this.content.currentTabName;\n          if (activeName === targetName) {\n            tabs.forEach((tab, index) => {\n              if (tab.name === targetName) {\n                let nextTab = tabs[index + 1] || tabs[index - 1];\n                if (nextTab) {\n                  activeName = nextTab.name;\n                }\n              }\n            });\n          }\n          \n          this.content.currentTabName = activeName;\n          this.content.tabs = tabs.filter(tab => tab.name !== targetName);\n        }\n      },\n\n      fetchWebshellData(){\n        request({\n          url: '/webshell/findAll',\n          method: 'get',\n        }).then(response => {\n          this.webshells = response.data;\n        }).catch(error => {\n          console.log(error);\n        })\n      },\n\n      selectWebshell(isAddTab){\n        if(isAddTab){\n          this.selectWebshellForm.visible = false;\n          let newTabName = ++this.content.tabIndex + '';\n          var id = this.selectWebshellForm.webshellId;\n\n          var index = this.content.tabs.push({\n            title: \"加载中...\",\n            name: newTabName,\n            id:id\n          })-1;\n          this.content.currentTabName = newTabName;\n\n          request({\n            url: '/webshell/getTerminalInfoById',\n            method: 'get',\n            params: { id:id } \n          }).then(response => {\n\n            //设置tab标题\n            var url = response.data.url;\n            var res = url.match(/https?:\\/\\/(.*)?\\//);\n            if(res){\n              this.content.tabs[index].title = res[1];\n            }else{\n              this.content.tabs[index].title = url;\n            }\n\n            //初始化Terminal\n            const term = new Terminal({\n              //fontSize: 14,\n              rendererType: \"canvas\", //渲染类型\n              rows: 50, //行数\n              //cols: parseInt(_this.cols), // 不指定行数，自动回车后光标从下一行开始\n              convertEol: true, //启用时，光标将设置为下一行的开头\n              //scrollback: 50, //终端中的回滚量\n              disableStdin: false, //是否应禁用输入。\n              cursorStyle: \"underline\", //光标样式\n              cursorBlink: true, //光标闪烁\n              theme: {\n                foreground: \"#BFCBD9\", //字体\n                background: \"#304156\", //背景色\n                cursor: \"help\", //设置光标\n                //lineHeight: 16,\n              },\n            });\n            const fitAddon = new FitAddon();\n            term.loadAddon(fitAddon);\n\n            this.content.tabs[index].term = term;\n            this.content.tabs[index].fitAddon = fitAddon;\n            this.content.tabs[index].path = response.data.path;\n            this.content.tabs[index].hostname = response.data.hostname;\n            this.content.tabs[index].user = response.data.user;\n            this.$forceUpdate();\n\n            this.openTerm(this.$refs[\"xterm\"+newTabName][0].$el,this.content.tabs[index]);\n            \n          }).catch(error => {\n            this.content.tabs[index].title = \"加载失败\";\n            console.log(error);\n          })\n\n        }else{\n          this.selectWebshellForm.visible = true;\n        }\n      },\n\n      openTerm(component,tab){\n        tab.term.open(component);\n        tab.fitAddon.fit();\n        tab.term.focus();\n        var prompt = tab.user+\"@\"+tab.hostname+\": \"+tab.path;\n        tab.term.writeln(prompt);\n        tab.term.write(\"$ \");\n        \n        tab.command = \"\"; //初始化命令\n        tab.termOnData = function(data){  //在tab中定义termOnData函数\n\n          switch (data) {\n            case String.fromCodePoint(13): //回车\n              tab.term.write(data + \"\\n\");\n\n              if(tab.command.trim() == \"clear\" || tab.command.trim() == \"cls\") {\n                console.log(1);\n                tab.term.clear();\n                tab.term.write(\"\\u001b[H\\u001b[2J\");\n              }\n              \n              request({\n                url: '/webshell/executeCommandById',\n                method: 'post',\n                data: { \n                  id: tab.id,\n                  path: tab.path,\n                  command: tab.command\n                } \n              }).then(response => {\n                tab.term.writeln(response.data.result);\n                tab.path = response.data.path;\n\n                var prompt = tab.user+\"@\"+tab.hostname+\": \"+tab.path;\n                tab.term.writeln(prompt);\n                tab.term.write(\"$ \");\n              }).catch(error => {\n                console.log(error);\n              })\n\n              tab.command = \"\";\n              break;\n            case String.fromCodePoint(127): //删除\n              if (tab.command.length <= 0) { //输入的command删除完后，不再对删除键做出反应\n                break;\n              }\n              if (tab.command.charCodeAt(tab.command.length - 1) > 127) { //判断要删除的字符是否是汉字\n                tab.term.write(\"\\b\\b  \\b\\b\");\n              } else {\n                tab.term.write(\"\\b \\b\");\n              }\n              tab.command = tab.command.substring(0, tab.command.length - 1);\n              break;\n            case String.fromCodePoint(27) + \"[A\": //上\n              break;\n            case String.fromCodePoint(27) + \"[B\": //下\n              break;\n            case String.fromCodePoint(27) + \"[D\": //左\n              break;\n            case String.fromCodePoint(27) + \"[C\": //右\n              break;\n            case String.fromCodePoint(9): //tab\n              break;\n            default:\n              tab.command = tab.command + data;\n              tab.term.write(data);\n          }\n        };\n\n        tab.term.onData(tab.termOnData); //在terminal输入数据，会调用tab中的termOnData函数并传入输入的数据\n      },\n\n      resize(){\n        for(var index in this.content.tabs){\n          if (this.content.tabs[index].fitAddon){\n            this.content.tabs[index].fitAddon.fit();\n          }\n        }\n      }\n\n    },\n\n    created(){\n      this.fetchWebshellData();\n      this.name = this.$route.name;\n      if(this.$route.params.id){\n        this.selectWebshellForm.webshellId = this.$route.params.id\n        this.selectWebshell(true);\n      }\n\n      window.addEventListener('resize', this.resize);\n    },\n\n    watch: {\n      $route(to, from) {\n        if(to.name == this.name){\n          this.fetchWebshellData();\n          if(this.$route.params.id){\n            this.selectWebshellForm.webshellId = this.$route.params.id\n            this.selectWebshell(true);\n          }\n        }\n      }\n    },\n\n    mounted(){\n      window.vue = this;\n    },\n\n  };\n</script>"]}]}